{"version":3,"file":"HeroSlider.js","sources":["../src/HeroSlider.tsx"],"sourcesContent":["import React from 'react';\n\nimport Buttons from './components/Buttons';\nimport HeroSliderModuleCss from './HeroSlider.module.css';\nimport {\n  AccessibilityProps,\n  AccessibilityProvider,\n  useAccessibility\n} from './modules/Accessibility';\nimport {\n  AnimationsProps,\n  AnimationsProvider,\n  useAnimations\n} from './modules/Animations';\nimport {\n  AutoplayProps,\n  AutoplayProvider,\n  useAutoplay\n} from './modules/Autoplay';\nimport ConsoleLogger from './modules/ConsoleLogger';\nimport {\n  ControllerProps,\n  ControllerProvider,\n  useController\n} from './modules/Controller';\nimport {\n  IntersectionObserverProvider,\n  useIntersectionObserver\n} from './modules/IntersectionObserver';\nimport { LayoutProvider, useLayout } from './modules/Layout';\nimport { ManagerProps, ManagerProvider } from './modules/Manager';\nimport {\n  SettingsProps,\n  SettingsProvider,\n  useSettings\n} from './modules/Settings';\nimport { composeCssClasses } from './utils/composeCssClasses';\n\nconst logger = ConsoleLogger.new();\n\n/**\n * `HeroSlider` props.\n */\nexport interface HeroSliderProps {\n  /**\n   * Slider className.\n   */\n  className?: React.HTMLProps<HTMLDivElement>['className'];\n  /**\n   * CSS property. Defines the width of the slider.\n   * @default '100%'\n   */\n  width?: React.CSSProperties['width'];\n  /**\n   * CSS property. Defines the height of the slider.\n   * @default '100vh'\n   */\n  height?: React.CSSProperties['height'];\n  /**\n   * Inline CSS styling.\n   */\n  style?: Omit<React.CSSProperties, 'width' | 'height'>;\n\n  // Modules\n  manager?: ManagerProps;\n  settings?: SettingsProps;\n  controller?: ControllerProps;\n  accessibility?: AccessibilityProps;\n  animations?: AnimationsProps;\n  autoplay?: AutoplayProps;\n}\n\nfunction Orchestrator({\n  className,\n  width = '100%',\n  height = '100vh',\n  style,\n  children\n}: React.PropsWithChildren<\n  Pick<HeroSliderProps, 'className' | 'width' | 'height' | 'style'>\n>) {\n  logger.info('[Orchestrator] rerender');\n\n  const { shouldDisplayButtons } = useAccessibility();\n  const { sliderFadeInDuration, navbarFadeInDuration, navbarFadeInDelay } =\n    useAnimations();\n  const { state: layout } = useLayout();\n  const { slidingDuration, slidingDelay, getSlidingCycleDuration } =\n    useController();\n  const settings = useSettings();\n  const { debounce } = useAutoplay();\n  const { onTouchStartHandler, onTouchMoveHandler, onTouchEndHandler } =\n    useAccessibility();\n  const { elementObservedRef } = useIntersectionObserver();\n\n  /**\n   * CSS variables for the transitions.\n   */\n  const cssVariables = {\n    '--sliding-duration': `${slidingDuration}ms`,\n    '--sliding-delay': `${slidingDelay}ms`,\n    '--slide-transition-delay': `${getSlidingCycleDuration()}ms`,\n    '--slider-width': layout.width ? `${layout.width}px` : undefined,\n    '--slider-height': layout.height ? `${layout.height}px` : undefined,\n    '--slider-color': settings.sliderColor,\n    '--slider-fade-in-duration': `${sliderFadeInDuration}ms`,\n    '--nav-fade-in-duration': `${navbarFadeInDuration}ms`,\n    '--nav-fade-in-delay': `${navbarFadeInDelay}ms`,\n    '--nav-background-color': settings.navbarStyle\n      ? settings.navbarStyle.color\n      : undefined,\n    '--nav-active-color': settings.navbarStyle\n      ? settings.navbarStyle.activeColor\n      : undefined,\n    '--mask-duration': `${getSlidingCycleDuration()}ms`\n  };\n\n  return (\n    <div\n      data-testid=\"hero-slider\"\n      className={composeCssClasses('hero-slider', className)}\n      ref={elementObservedRef}\n    >\n      <div\n        data-testid=\"hero-slider-wrapper\"\n        ref={layout.slider}\n        className={composeCssClasses(\n          'hero-slider-wrapper',\n          HeroSliderModuleCss.Wrapper\n        )}\n        onTouchStart={onTouchStartHandler}\n        onTouchMove={onTouchMoveHandler}\n        onTouchEnd={onTouchEndHandler}\n        onMouseMoveCapture={debounce}\n        style={{\n          ...(cssVariables as React.CSSProperties),\n          ...style,\n          width,\n          height\n        }}\n      >\n        {children}\n        {shouldDisplayButtons && <Buttons />}\n      </div>\n    </div>\n  );\n}\n\nexport default function HeroSlider(\n  props: React.PropsWithChildren<HeroSliderProps>\n) {\n  return (\n    <LayoutProvider>\n      <ManagerProvider manager={props.manager}>\n        <SettingsProvider settings={props.settings}>\n          <ControllerProvider controller={props.controller}>\n            <AccessibilityProvider accessibility={props.accessibility}>\n              <AnimationsProvider animations={props.animations}>\n                <IntersectionObserverProvider>\n                  <AutoplayProvider autoplay={props.autoplay}>\n                    <Orchestrator\n                      className={props.className}\n                      width={props.width}\n                      height={props.height}\n                      style={props.style}\n                    >\n                      {props.children}\n                    </Orchestrator>\n                  </AutoplayProvider>\n                </IntersectionObserverProvider>\n              </AnimationsProvider>\n            </AccessibilityProvider>\n          </ControllerProvider>\n        </SettingsProvider>\n      </ManagerProvider>\n    </LayoutProvider>\n  );\n}\n"],"names":["ConsoleLogger","useAccessibility","useAnimations","useLayout","useController","useSettings","useAutoplay","useIntersectionObserver","_jsx","composeCssClasses","_jsxs","HeroSliderModuleCss","Buttons","LayoutProvider","ManagerProvider","SettingsProvider","ControllerProvider","AccessibilityProvider","AnimationsProvider","IntersectionObserverProvider","AutoplayProvider"],"mappings":"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"}